{"ast":null,"code":"var _jsxFileName = \"/Users/TARIQ/Desktop/e_commerce/src/components/CheckoutForm/PaymentForm.jsx\";\nimport { Divider, Typography, Button } from '@material-ui/core';\nimport { CardElement, Elements, ElementsConsumer } from '@stripe/react-stripe-js';\nimport { loadStripe } from '@stripe/stripe-js';\nimport React from 'react';\nimport Review from './Review';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY);\n\nconst PaymentForm = _ref => {\n  let {\n    shippingData,\n    checkoutToken,\n    backStep,\n    onCaptureCheckout,\n    nextStep,\n    timeout\n  } = _ref;\n\n  const handleSubmit = async (event, elements, stripe) => {\n    event.preventDefault();\n    if (!stripe || !elements) return;\n    const cardElement = elements.getElement(CardElement);\n    const {\n      error,\n      paymentMethod\n    } = await stripe.createPaymentMethod({\n      type: \"card\",\n      card: cardElement\n    });\n\n    if (error) {\n      console.log(error);\n    } else {\n      const orderData = {\n        list_items: checkoutToken.live.line_items,\n        customer: {\n          firstname: shippingData.firstname,\n          lastname: shippingData.lastname,\n          email: shippingData.email\n        },\n        shipping: {\n          name: 'primary',\n          street: shippingData.address1,\n          town_city: shippingData.city,\n          county_state: shippingData.shippingSubdivision,\n          postal_zip_code: shippingData.zip,\n          country: shippingData.shippingCountry\n        },\n        fullfillment: {\n          shipping_method: shippingData.shippingOption\n        },\n        payment: {\n          gateway: 'stripe',\n          stripe: {\n            payment_method_id: paymentMethod.id\n          }\n        }\n      };\n      onCaptureCheckout(checkoutToken.id, orderData);\n      nextStep();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Review, {\n      checkoutToken: checkoutToken\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h6\",\n      gutterBottom: true,\n      style: {\n        margin: \"20px 0\"\n      },\n      children: \"Payment method\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Elements, {\n      stripe: stripePromise,\n      children: /*#__PURE__*/_jsxDEV(ElementsConsumer, {\n        children: _ref2 => {\n          let {\n            elements,\n            stripe\n          } = _ref2;\n          return /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: e => handleSubmit(e, elements, stripe),\n            children: [/*#__PURE__*/_jsxDEV(CardElement, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 17\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                onClick: backStep,\n                children: \"Back\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                type: \"submit\",\n                variant: \"contained\",\n                disabled: !stripe,\n                color: \"primary\",\n                children: [\"pay \", checkoutToken.live.subtotal.formatted_with_symbol]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 61,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 15\n          }, this);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_c = PaymentForm;\nexport default PaymentForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"PaymentForm\");","map":{"version":3,"sources":["/Users/TARIQ/Desktop/e_commerce/src/components/CheckoutForm/PaymentForm.jsx"],"names":["Divider","Typography","Button","CardElement","Elements","ElementsConsumer","loadStripe","React","Review","stripePromise","process","env","REACT_APP_STRIPE_PUBLIC_KEY","PaymentForm","shippingData","checkoutToken","backStep","onCaptureCheckout","nextStep","timeout","handleSubmit","event","elements","stripe","preventDefault","cardElement","getElement","error","paymentMethod","createPaymentMethod","type","card","console","log","orderData","list_items","live","line_items","customer","firstname","lastname","email","shipping","name","street","address1","town_city","city","county_state","shippingSubdivision","postal_zip_code","zip","country","shippingCountry","fullfillment","shipping_method","shippingOption","payment","gateway","payment_method_id","id","margin","e","display","justifyContent","subtotal","formatted_with_symbol"],"mappings":"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","sourcesContent":["import { Divider, Typography,Button } from '@material-ui/core';\nimport { CardElement, Elements, ElementsConsumer } from '@stripe/react-stripe-js';\nimport { loadStripe } from '@stripe/stripe-js';\nimport React from 'react';\nimport Review from './Review';\n\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY);\n\nconst PaymentForm = ({shippingData,checkoutToken,backStep,onCaptureCheckout,nextStep,timeout}) => {\n\n  const handleSubmit = async (event,elements,stripe)=>{\n    event.preventDefault();\n    \n    if(!stripe || !elements) return;\n\n    const cardElement = elements.getElement(CardElement);\n\n    const {error,paymentMethod} = await stripe.createPaymentMethod({type:\"card\",card:cardElement});\n\n    if(error){\n      console.log(error);\n    }else{\n      const orderData = {\n        list_items:checkoutToken.live.line_items,\n        customer:{firstname:shippingData.firstname,lastname:shippingData.lastname,email:shippingData.email},\n        shipping:{\n          name:'primary',\n          street:shippingData.address1,\n          town_city:shippingData.city,\n          county_state:shippingData.shippingSubdivision,\n          postal_zip_code:shippingData.zip,\n          country:shippingData.shippingCountry\n        },\n        fullfillment:{shipping_method: shippingData.shippingOption},\n        payment:{\n          gateway:'stripe',\n          stripe:{\n            payment_method_id:paymentMethod.id\n          }\n        }\n      }\n\n      onCaptureCheckout(checkoutToken.id,orderData);\n      \n      nextStep();\n    }\n  }\n  return (\n    <>\n        <Review checkoutToken={checkoutToken} />\n        <Divider />\n        <Typography variant='h6' gutterBottom style={{margin:\"20px 0\"}}>Payment method</Typography>\n        <Elements stripe={stripePromise}>\n          <ElementsConsumer>\n            {({elements,stripe})=>(\n              <form onSubmit={(e)=>handleSubmit(e,elements,stripe)}>\n                <CardElement  />\n                <br/> <br/>\n                <div style={{display:'flex',justifyContent:'space-between'}}>\n                  <Button variant='outlined' onClick={backStep} >Back</Button>\n                  <Button type=\"submit\" variant='contained' disabled={!stripe} color=\"primary\">pay {checkoutToken.live.subtotal.formatted_with_symbol}</Button>\n                </div>\n              </form>\n            )}\n          </ElementsConsumer>\n        </Elements>\n    </>\n    );\n};\n\nexport default PaymentForm;\n"]},"metadata":{},"sourceType":"module"}